# /opt/batocera-emulationstation/node_modules/io/parsers.js

## Overview

This file contains a set of very simple parsers providing just enough of the specs/grammars 
to handle the different property file languages and styles used in batocera.linux:
- es_systems.yml
- es_features.yml
- configgen-*.yml
- *.conf files
- *.cfg files
- *.json
- *.xml

For XML and YAML formatted files, an external tool will be used (xq and yq) to transform to json first. 
This makes those types effectively twice as expensive to process.  
Thus, where speed matters, the user should not use yml. Moreover, frequently parsed files should be handled with 
dedicated in-process parsing functions.  
Example: `es_settings.cfg` is an xml file, but very simply structured.

## Index

* [parseDict](#parsedict)
* [confToDict](#conftodict)
* [class ParseStack](#class-parsestack)
* [endBlock](#endblock)
* [class PropValue](#class-propvalue)

## parseDict

This function is the main entrance to this file.  
It tries to auto-detect the parser function to use depending on the file type.  
The detection is rudimentary, it goes by extension. Concrete handler functions are looked up
in a constant object named `PARSE_FUNCTIONS`.

All handler functions follow the same contract:
- They will generally return nested object structures.
- Each actual property entry will we wrapped in an instance of `PropValue`.  

[**@exported**]

### See also

* [class PropValue](#class-propvalue)

## confToDict

Handles `*.conf` files like `batocera.conf`.  
Capable of unpacking batocera's special syntaxes into regular tree structures:
- system["<game-name>"].something=...
- system.folder["<folder-path>"].something=...

[**@exported**]

### See also

* [analyseProperty](#analyseproperty)

## class ParseStack

YAML FILES

## endBlock

return false if the current line is NOT processed by handler,
but only serves as terminator

## class PropValue

Helper class that can be used to transport meta-information about the origin of a property.
Most use cases shouldn't care because of the valueOf implementation and just behave as if it was a string.
One notable exception is default initialisation by existence checks.


<sub>Generated with shdoc from [/opt/batocera-emulationstation/node_modules/io/parsers.js](https://github.com/GB609/batocera-ES-onArch/blob/befd01c3618b2e08a4da21972df39f296b9774b0
/sources/fs-root/opt/batocera-emulationstation/node_modules/io/parsers.js)</sub>